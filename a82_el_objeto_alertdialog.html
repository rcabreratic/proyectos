<!DOCTYPE html>
<html lang="es" xml:lang="es" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>A.8.2.- El objeto AlertDialog | Creación de una aplicación móvil </title>
<meta name="author" content="José Luis Camuñas Taguas" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" />
<meta name="generator" content="eXeLearning 2.7 - exelearning.net" />
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<script type="text/javascript" src="SCORM_API_wrapper.js"></script>
<script type="text/javascript" src="SCOFunctions.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" /></head>
<body id="exe-node-85" class="exe-scorm" onunload="unloadPage()"><script type="text/javascript">document.body.className+=" js";jQuery(function(){loadPage()})</script>
<div id="outer">
<section id="main">
<header id="nodeDecoration"><div id="headerContent"><h1 id="nodeTitle">A.8.2.- El objeto AlertDialog</h1></div></header>
<article class="iDevice_wrapper FreeTextfpdIdevice" id="id419">
<div class="iDevice emphasis0">
<div id="ta419_69" class="block iDevice_content">
<p>¿Y para pedir confirmación al usuario, cómo lo hacemos?</p>
<p>Con el objeto <code>AlertDialog</code> podemos mostrar un mensaje en forma de ventana de diálogo y esperar a la confirmación por parte del usuario. También es útil para solicitar determinada información al usuario.</p>
<div class="elemento_derecha">
<div class="elemento_centrado"><img src="PMDM05_CONT_R25_libreria.png" alt="Captura de pantalla de la librería necesaria para el objeto AlertDialog. Se muestra la estructura de directorios, en la que dentro e la carpeta libs está el archivo de la librería, android.support-v4.jar" title="Librería del objeto AlertDialog." height="101" width="215" /></div>
<div class="elemento_centrado credenciales">Captura del <acronym title="Integrated Development Environment" lang="en">IDE</acronym> <span lang="en">Eclipse.</span> <a title="Acceder a la información sobre EPL en Wikipedia. (Se abre en una nueva ventana)" href="http://es.wikipedia.org/wiki/Eclipse_Public_License" target="_blank">Eclipse Public License</a></div>
</div>
<p>La clase <code>AlertDialog</code> define el estilo y la estructura, pero debemos apoyarnos en la clase <code>DialogFragment</code>, ya que dispone de los controles necesarios para construir la ventana de diálogo. Por tanto debemos asegurarnos que disponemos de la librería <code>android-support-v4.jar</code> instalada en nuestro proyecto para que la aplicación funcione en dispositivos que tengan instalada una versión inferior a <span lang="en"></span><span lang="en"><span lang="en">Android</span> </span>3.0 (<acronym title="Application Programming Interface" lang="en">API</acronym> 11).</p>
<p>Podemos implementar varias tipos de diálogo dependiendo de la finalidad que busquemos:</p>
<ul class="lista_verificacion">
<li><strong>Alerta:</strong> la ventana está formada por un título (opcional), un mensaje y un único botón de <code>Aceptar</code>.</li>
<li><strong>Confirmación:</strong> la ventana está formada por un título (opcional), un mensaje y al menos dos botones (<code>Aceptar</code> y <code>Cancelar</code>).</li>
<li><strong>Selección:</strong> la ventana está formada por un título y una serie de opciones a seleccionar.</li>
<li><strong>Personalizados:</strong> la ventana está formada por un <span lang="en"></span><span lang="en"><span lang="en">layou</span>t</span> personalizado (<acronym title="eXtensible Markup Language" lang="en">XML</acronym>) y un botón de <code>Aceptar</code>.</li>
</ul>
<p>Para implementar una ventana de diálogo podemos seguir los siguientes pasos:</p>
<ol class="lista_esquema">
<li>Crear una clase nueva que extienda de la clase <code>DialogFragment</code> y sobrescribir el método <code>onCreateDialog()</code> que construirá el diálogo.</li>
<li>Crear un objeto de tipo <code>AlertDialog.Builder </code>cuyos métodos nos servirán para asignar las propiedades a la ventana de diálogo. Algunos de estos métodos son los siguientes:</li>
<ol>
<li><code>setTitle()</code>: establece el título de la ventana. Se puede prescindir de él si no es necesario.</li>
<li><code>setMessage()</code>: establece el texto del mensaje en el área reservada para el contenido.</li>
<li><code>setPositiveButton()</code>: establece un botón de<code> Aceptar</code> o de <code>OK</code> en la parte inferior.</li>
<li><code>setNegativeButton()</code>: establece un botón de <code>Cancelar</code> en el parte inferior.</li>
</ol></ol>
<p>Aquí vemos un ejemplo de implementación de mensaje de alerta o información al usuario:</p>
<div class="codigo elemento_centrado" style="width: 47.25em;">
<div class="texto_izquierda">
<pre><code>public class EjemploAlertDialog extends DialogFragment {</code></pre>
<pre><code>    @Override</code></pre>
<pre><code>    public Dialog onCreateDialog(Bundle savedInstanceState) {</code></pre>
<pre><code>        //Creamos el objeto AlertDialog.Builder</code></pre>
<pre><code>        AlertDialog.Builder builder =</code></pre>
<pre><code>                new AlertDialog.Builder(getActivity());</code></pre>
<pre><code>        // Asignamos las propiedades que se mostrarán.</code></pre>
<pre><code>        builder.setTitle("Importante")</code></pre>
<pre><code>            .setMessage("Debes leer este mensaje.")</code></pre>
<pre><code>               .setPositiveButton("Aceptar", </code></pre>
<pre><code>               new DialogInterface.OnClickListener() {</code></pre>
<pre><code>                   public void onClick(DialogInterface dialog, int id) {</code></pre>
<pre><code>                            //Acciones a realizar cuando pulsamos el botón.</code></pre>
<pre><code>                    dialog.cancel();</code></pre>
<pre><code>                   }</code></pre>
<pre><code>               });     </code></pre>
<pre><code>        return builder.create();</code></pre>
<pre><code>    }</code></pre>
<pre><code>}</code></pre>
</div>
</div>
<p>Cuando queramos que se abra la ventana de diálogo anterior desde nuestra aplicación al pulsar un botón, por ejemplo, tendremos que utilizar el método <code>getSupportFragmentManager()</code> como en el siguiente código:</p>
<div class="codigo elemento_centrado" style="width: 44.5em;">
<div class="texto_izquierda">
<pre><code>boton.setOnClickListener(new View.OnClickListener() {</code></pre>
<pre><code>    public void onClick(View v) {</code></pre>
<pre><code>        FragmentManager fragmentManager = getSupportFragmentManager();</code></pre>
<pre><code>           DialogoAlerta dialogo = new DialogoAlerta();</code></pre>
<pre><code>        dialogo.show(fragmentManager, "tagAlerta");</code></pre>
<pre><code>    }</code></pre>
<pre><code>});</code></pre>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper DebesconocerfpdIdevice em_iDevice em_iDevice_debesconocerfpd" id="id420">
<div class="iDevice emphasis_debesconocerfpd" >
<header class="iDevice_header" style="background-image:url(icon_debesconocerfpd.png)"><h1 class="iDeviceTitle">Debes conocer</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta420_44" class="block iDevice_content">
<p>Intenta implementar algunos ejemplos más sobre otro tipo de ventanas de diálogo (confirmación, selección, <abbr title="etcétera.">etc.</abbr>). Puedes consultar el siguiente videotutorial para ver más ejemplos.</p>
<div class="exe-figure exe-media position-center license-copyright" style="width: 350px;">
<div class="figcaption header">Crear un <code>AlertDialog</code> - Tutorial <span class="figcaption header" lang="en">Android Studio</span></div>
<iframe width="350" height="288" src="//www.youtube.com/embed/IjNa5LyieaE" frameborder="0"></iframe>
<div class="figcaption"><a href="descripcion_video_crear_alertdialog.html" title="Acceder al resumen textual alternativo para el vídeo &quot;Crear Alert Dialog - Tutorial Android Studio&quot; (Se abre en una nueva ventana)" target="_blank"><span class="license"><span>Resumen textual alternativo</span></span></a></div>
</div>
<p class="enlace_centrado"></p>
<div id="gtx-trans" style="position: absolute; left: 398px; top: 376.984px;">
<div class="gtx-trans-icon"></div>
</div>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper EleccionmultiplefpdIdevice em_iDevice em_iDevice_autoevaluacionfpd" id="id421">
<div class="iDevice emphasis_autoevaluacionfpd" >
<header class="iDevice_header" style="background-image:url(icon_autoevaluacionfpd.gif)"><h1 class="iDeviceTitle">Autoevaluación</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<section class="question">
<form name="multi-choice-form-421_56" action="#" onsubmit="return false" class="activity-form">
<h1 class="js-sr-av">Pregunta</h1>
<div id="taquestion421_56" class="block question iDevice_content">
<p><strong>Si queremos mostrar al usuario un mensaje en la pantalla con dos botones &ldquo;<code>Aceptar</code>&rdquo; y &ldquo;<code>Cancelar</code>&rdquo; utilizaremos un objeto:</strong></p>
</div>
<section class="iDevice_answers">
<h1 class="js-sr-av">Respuestas</h1>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i421_59" class="sr-av"><a href="#answer-421_59">Opción 1</a></label><input type="radio" name="option421_56" id="i421_59" class="exe-radio-option exe-radio-option-0-4-421_56-multi"/>
</p>
<div class="iDevice_answer-content" id="answer-421_59"><div id="taans421_59" class="block iDevice_content">
<p><code>AlertDialog</code> de tipo Alerta.</p>
</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i421_157" class="sr-av"><a href="#answer-421_157">Opción 2</a></label><input type="radio" name="option421_56" id="i421_157" class="exe-radio-option exe-radio-option-1-4-421_56-multi"/>
</p>
<div class="iDevice_answer-content" id="answer-421_157"><div id="taans421_157" class="block iDevice_content">
<p><code>AlertDialog </code>de tipo Confirmaci&oacute;n.</p>
</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i421_160" class="sr-av"><a href="#answer-421_160">Opción 3</a></label><input type="radio" name="option421_56" id="i421_160" class="exe-radio-option exe-radio-option-2-4-421_56-multi"/>
</p>
<div class="iDevice_answer-content" id="answer-421_160"><div id="taans421_160" class="block iDevice_content">
<p><code>Toast</code>.</p>
</div>
</div>
</section>
<section class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="i421_163" class="sr-av"><a href="#answer-421_163">Opción 4</a></label><input type="radio" name="option421_56" id="i421_163" class="exe-radio-option exe-radio-option-3-4-421_56-multi"/>
</p>
<div class="iDevice_answer-content" id="answer-421_163"><div id="taans421_163" class="block iDevice_content">
<p><code>Toast</code> con dos botones.</p>
</div>
</div>
</section>
</section>
<section class="iDevice_feedbacks js-feedback">
<h1 class="js-sr-av">Retroalimentación</h1>
<section id="sa0b421_56" class="feedback js-hidden">
<div id="taf421_59" class=" iDevice_content">
<p>Incorrecto.<code></code></p>
</div>
</section>
<section id="sa1b421_56" class="feedback js-hidden">
<div id="taf421_157" class=" iDevice_content">
<p>Esta es la &uacute;nica respuesta correcta, pues se utiliza para aceptar o cancelar una petici&oacute;n por parte del usuario. El objeto <code>Toast </code>no pide nunca confirmaci&oacute;n al usuario, y el <code>AlertDialog</code> de tipo alerta s&oacute;lo lleva un bot&oacute;n de <code>Acepta</code>r cuando el usuario ha le&iacute;do el mensaje.</p>
</div>
</section>
<section id="sa2b421_56" class="feedback js-hidden">
<div id="taf421_160" class=" iDevice_content">
<p>No es correcto.</p>
</div>
</section>
<section id="sa3b421_56" class="feedback js-hidden">
<div id="taf421_163" class=" iDevice_content">
<p>No es la opci&oacute;n correcta.</p>
</div>
</section>
</section>
</form>
<section class="iDevice_solution feedback js-hidden">
<h1>Solución</h1>
<ol>
<li><a href="#answer-421_59">Incorrecto</a><span> (<a href="#sa0b421_56">Retroalimentación</a>)</span></li>
<li><a href="#answer-421_157">Opción correcta</a><span> (<a href="#sa1b421_56">Retroalimentación</a>)</span></li>
<li><a href="#answer-421_160">Incorrecto</a><span> (<a href="#sa2b421_56">Retroalimentación</a>)</span></li>
<li><a href="#answer-421_163">Incorrecto</a><span> (<a href="#sa3b421_56">Retroalimentación</a>)</span></li>
</ol>
</section>
</section>
</div>
</div>
</div>
</article>
</section>
<div id="packageLicense" class="cc cc-by-nc-sa">
<p><span>Obra publicada con</span> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Licencia Creative Commons Reconocimiento No comercial Compartir igual 4.0</a></p>
</div>
</div>
<script type="text/javascript" src="_fpd_js.js"></script></body></html>